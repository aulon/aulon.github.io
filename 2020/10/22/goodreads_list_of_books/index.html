<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="The Goodreads API suffers from good documentation and lack of features. Currently, it is not possible for a user to get a list of their saved books. Furthermore, when you navigate to the section My Bo">
<meta property="og:type" content="article">
<meta property="og:title" content="Goodreads: Get a User&#39;s list of books">
<meta property="og:url" content="https://aulon.me/2020/10/22/goodreads_list_of_books/index.html">
<meta property="og:site_name" content="aulon">
<meta property="og:description" content="The Goodreads API suffers from good documentation and lack of features. Currently, it is not possible for a user to get a list of their saved books. Furthermore, when you navigate to the section My Bo">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-10-22T16:54:16.425Z">
<meta property="article:modified_time" content="2020-10-22T17:24:34.503Z">
<meta property="article:author" content="aulon">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Goodreads: Get a User&#39;s list of books</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.2.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/projects/">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/2020/10/22/hello-world/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://aulon.me/2020/10/22/goodreads_list_of_books/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&text=Goodreads: Get a User&#39;s list of books"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&is_video=false&description=Goodreads: Get a User&#39;s list of books"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Goodreads: Get a User&#39;s list of books&body=Check out this article: https://aulon.me/2020/10/22/goodreads_list_of_books/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&name=Goodreads: Get a User&#39;s list of books&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://aulon.me/2020/10/22/goodreads_list_of_books/&t=Goodreads: Get a User&#39;s list of books"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Technologies-used"><span class="toc-number">1.</span> <span class="toc-text">Technologies used:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prerequisites"><span class="toc-number">2.</span> <span class="toc-text">Prerequisites</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Understanding-the-Script"><span class="toc-number">3.</span> <span class="toc-text">Understanding the Script</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Output"><span class="toc-number">4.</span> <span class="toc-text">The Output</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Goodreads: Get a User&#39;s list of books
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">aulon</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-10-22T16:54:16.425Z" itemprop="datePublished">2020-10-22</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/project/">project</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>The Goodreads API suffers from good documentation and lack of features. Currently, it is not possible for a user to get a list of their saved books. Furthermore, when you navigate to the section <code>My Books</code>, you need to keep scrolling to the end of the page until all books are loaded in the table. I wrote a small script in <code>python</code>, using <code>selenium</code>, <code>beautifulSoup</code>, and <code>pandas</code> to generate a csv file that contains all my saved books.</p>
<h2 id="Technologies-used"><a href="#Technologies-used" class="headerlink" title="Technologies used:"></a>Technologies used:</h2><ul>
<li>Python </li>
<li>Selenium</li>
<li>BeautifulSoup</li>
<li>Pandas</li>
</ul>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><ol>
<li>Download the Selenium <a target="_blank" rel="noopener" href="https://sites.google.com/a/chromium.org/chromedriver/">driver</a> (in my code I am using Chrome, but you can easily switch to Firefox)</li>
<li>When Selenium opens your profile, a pop-up will show up asking for your login credentials. The code will ignore the pop-up by refreshing the page, however in order to see the list of your books either stay logged-in in Chrome or make your profile public.  </li>
</ol>
<h2 id="Understanding-the-Script"><a href="#Understanding-the-Script" class="headerlink" title="Understanding the Script"></a>Understanding the Script</h2><p>Start by importing the necessary libraries.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure>
<p>Initialize the webdriver element on the chrome browser and specify the url you are trying to access.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(<span class="string">&#x27;https://www.goodreads.com/review/list/63365681?ref=nav_mybooks&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>Wait for pop-up to show up (2 seconds) then refresh the page.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">driver.refresh()</span><br></pre></td></tr></table></figure>

<p>The goal is to stop scrolling when the table has loaded all your saved books. We can do this by accessing the HTML element at the bottom of the page which indicated the number of books loaded: <code>60 of 995 loaded</code>. We strip the string from any leading or trailing whitespaces, then we split the string on spaces. The first element of this list is the current number of books loaded. The third element is the maximum number of books in our list.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = driver.find_element_by_id(<span class="string">&#x27;infiniteStatus&#x27;</span>).text.strip()</span><br><span class="line">current = <span class="built_in">int</span>(s.split()[<span class="number">0</span>])</span><br><span class="line">maxx = <span class="built_in">int</span>(s.split()[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<p>Next we loop until the end is reached and the table is filled with all books.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (current &lt; maxx):</span><br><span class="line">    element = driver.find_element_by_class_name(<span class="string">&quot;responsiveSiteFooter__heading&quot;</span>)</span><br><span class="line">    driver.execute_script(<span class="string">&quot;arguments[0].scrollIntoView();&quot;</span>, element)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    s = driver.find_element_by_id(<span class="string">&#x27;infiniteStatus&#x27;</span>).text.strip()</span><br><span class="line">    current = <span class="built_in">int</span>(s.split()[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>Once the page is loaded, we get the source code and search for a table with the id <em>‘books’</em>. Pandas has a built in feature that converts table tags into a dataframe.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">html_source = driver.page_source</span><br><span class="line">soup = BeautifulSoup(html_source, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">table = soup.find(<span class="string">&#x27;table&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;books&#x27;</span>)</span><br><span class="line">df = pd.read_html(<span class="built_in">str</span>(table))[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<p>We keep two columns (title and author), clean the strings, and write to a csv file.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = df[[<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;author&#x27;</span>]]</span><br><span class="line">df[<span class="string">&#x27;title&#x27;</span>] = df[<span class="string">&#x27;title&#x27;</span>].<span class="built_in">str</span>.replace(<span class="string">&#x27;title &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">df[<span class="string">&#x27;author&#x27;</span>] = df[<span class="string">&#x27;author&#x27;</span>].<span class="built_in">str</span>.replace(<span class="string">&#x27;author &#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df.to_csv(<span class="string">&#x27;list_of_books.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="The-Output"><a href="#The-Output" class="headerlink" title="The Output"></a>The Output</h2><p>The output is a csv file which contains all titles and authors of the books you have saved on Goodreads.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/projects/">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Technologies-used"><span class="toc-number">1.</span> <span class="toc-text">Technologies used:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prerequisites"><span class="toc-number">2.</span> <span class="toc-text">Prerequisites</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Understanding-the-Script"><span class="toc-number">3.</span> <span class="toc-text">Understanding the Script</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-Output"><span class="toc-number">4.</span> <span class="toc-text">The Output</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://aulon.me/2020/10/22/goodreads_list_of_books/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&text=Goodreads: Get a User&#39;s list of books"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&is_video=false&description=Goodreads: Get a User&#39;s list of books"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Goodreads: Get a User&#39;s list of books&body=Check out this article: https://aulon.me/2020/10/22/goodreads_list_of_books/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&title=Goodreads: Get a User&#39;s list of books"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://aulon.me/2020/10/22/goodreads_list_of_books/&name=Goodreads: Get a User&#39;s list of books&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://aulon.me/2020/10/22/goodreads_list_of_books/&t=Goodreads: Get a User&#39;s list of books"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2020
    aulon
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Articles</a></li>
         
          <li><a href="/projects/">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'G-QBDZ18CSHJ', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Baidu Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
